package modelo;

import java.time.LocalDate;
import java.util.List;
import java.util.ArrayList;

public class Jugador extends Persona {
	private float estatura;
	private float peso;
	private String posicion;
	private int camiseta;
	private List<EstadisticaPartido> estadisticas = new ArrayList<EstadisticaPartido>();

	public Jugador(int id,String nombre, String apellido, long dni, LocalDate fechaNacimiento,float estatura,float peso,String posicion,int camiseta) throws Exception {
		super(id,nombre, apellido, dni, fechaNacimiento);
		if (calcularEdad(fechaNacimiento) < 18) {
			throw new Exception("El jugador debe ser mayor de edad");
	    }
		this.fechaNacimiento = fechaNacimiento;
		this.estatura = estatura;
		this.peso = peso;
		this.posicion = posicion;
		this.camiseta = camiseta;
	}
	
	public void agregarEstadistica(Partido partido,Equipo equipo, int goles, int asistencias, int minutosJugados) {
		int id = (estadisticas.size()==0) ? 1 : estadisticas.getLast().getId()+1;
		EstadisticaPartido estadistica = new EstadisticaPartido(id,partido,equipo,goles,asistencias,minutosJugados);
		estadisticas.add(estadistica);
	}
	public EstadisticaPartido getEstadistica(int id) throws Exception {
		EstadisticaPartido encontrado = null;
		int actual = 0;
		while (encontrado == null && actual < estadisticas.size()) {
			if (estadisticas.get(actual).getId() == id) {
				encontrado = estadisticas.get(actual);
			}
		}
		if (encontrado == null) throw new Exception("Error: Estadistica no encontrado");
		return encontrado;
	}

	public void setEstadisticas(List<EstadisticaPartido> estadisticas) {
		this.estadisticas = estadisticas;
	}
	public List<EstadisticaPartido> getEstadisticas(){
		return estadisticas;
	}
	public float getEstatura() {
		return estatura;
	}
	public void setEstatura(float estatura) {
		this.estatura = estatura;
	}
	public float getPeso() {
		return peso;
	}
	public void setPeso(float peso) {
		this.peso = peso;
	}
	public String getPosicion() {
		return posicion;
	}
	public void setPosicion(String posicion) {
		this.posicion = posicion;
	}
	public int getCamiseta() {
		return camiseta;
	}
	public void setCamiseta(int camiseta) {
		this.camiseta = camiseta;
	}
	@Override
	public String toString() {
		return super.toString()
				+ "\nEstatura: " + estatura + "m, peso: " + peso + "kg, posicion " + posicion + ", camiseta " + camiseta;
	}
}
